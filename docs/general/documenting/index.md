# Документирование

## Общие сведения

В процессе разработки, поставки и сопровождения программного продукта обязательно прилагается сопутствующая документация или предоставляется доступ к актуальной информации:

- назначение, поддерживаемые функции, ресурсы, необходимые для его использования
- порядок установки и обновления
- пути решения знакомых проблем
- связь для подачи уведомлений о возникших проблемах, предложений и получения консультаций
- возможно и другая

При этом вышеуказанная информация должна всегда находиться в актуальном состоянии по поддерживаемым версиям продукта.

Удовлетворить вышеуказанные требования с возможностью минимизировать затраты на ее корректировку позволяют генераторы документации, поддерживающие достаточно простые языки разметки. При этом желательно иметь возможность установить генератор локально или получить удаленную услугу по разработке, генерации документов и их публикации в интернете.

В качестве внешнего сервиса можно [Read Docs](https://readthedocs.org/) - платформу для размещения документации по программному обеспечению в связке с сервисом [GitHub](https://github.com/) - для хостинга IT-проектов и их совместной разработки.

Автор в процессе работы использует автономно следующие генераторы документации: **MkDocs**, **DocFX** и **Sphinx**.
При этом в качестве редактора прекрасно подходит [Visual Studio Code](https://code.visualstudio.com/).
Этот редактор при первом создании файла определенного типа сам и подскажет какие расширения можно установить для автоматической проверки синтаксиса и форматирования.

## Генератор MkDocs

[MkDocs](https://www.mkdocs.org/) - это быстрый, простой и великолепный генератор статических сайтов, предназначенный для создания проектной документации. Исходные файлы документации пишутся на Markdown и настраивается с помощью одного файла конфигурации YAML. Он прост в использовании и может быть расширен сторонними темами, плагинами и расширениями Markdown.

MkDocks требует установленного [Python](https://www.python.org/).

Прекрасной темой для MkDocs может быть [Material](https://squidfunk.github.io/mkdocs-material/). Она включает хорошую документацию по установке темы, настройке создаваемого сайта и публикации его на GitHub.

Перед установкой Material для MkDocs требуется установить [Python](https://www.python.org/downloads/).

Установка Material для MkDocs выполнится с совместимыми версиями всех зависимостей: MkDocs, Markdown, Pygments и Python Markdown Extensions. Material для MkDocs всегда стремится поддерживать последние версии, поэтому нет необходимости устанавливать эти пакеты отдельно.

## Генератор DocFX

### Кратко о DocFX

[DocFX](https://dotnet.github.io/docfx/) хорош там, когда необходимо сгенерировать API-документацию из кода .NET и включить в общую документацию.

DocFX поддерживает в качестве языка разметки Markdown + YAWL, а также имеет ограниченный список выходных форматов: `HTML`. В связке с инструментом [wkhtmltopdf](https://wkhtmltopdf.org/) можно получить документацию и в `PDF`-формате.

### Поиск на русском

Для поддержки поиска необходимо в файле конфигурации `docfx.json` установить параметры:

- "postProcessors": ["ExtractSearchIndex"] - для генерации индексного файла для поиска
- "\_enableSearch": true - в "globalMetadata" - для отображения поля ввода для фразы поиска

Для поддержки поиска и русскоязычных фраз необходимо:

1. Получить с [ресурса языковых расширений для Lunr](https://github.com/MihaiValentin/lunr-languages) (поиск на клиентской стороне) файлы `lunr.stemmer.support.js`, `lunr.multi.js` и `lunr.ru.js` и поместиить их в каталог, где расположен файл `search-worker.js` в шаблоне по умолчанию.
2. В файле `search-worker.js` произвести нижеследующие изменения

```javascript
importScripts('lunr.min.js');
importScripts('lunr.stemmer.support.js', 'lunr.multi.js', 'lunr.ru.js'); // Add russian search
...
var lunrIndex = lunr(function() {
      this.pipeline.remove(lunr.stopWordFilter);
      this.use(lunr.multiLanguage('en', 'ru')); // Add russian search
      this.ref('href');
```

## Генератор Sphinx

[Sphinx](http://www.sphinx-doc.org/) хорош тем, что позволяет легко создавать интерактивную и красивую документацию в различных форматах:
`HTML` (включая `справку Windows HTML`), `LaTeX` (для печатных версий `PDF`), `ePub`, `Texinfo`, `страницы справочника`, `простой текст`. Основной язык разметки reStructuredText, но файлы на языке разметки Markdown также обрабатывает.

Недостатком пока является отсутствие стабильных расширений для генерации API-документации непосредственно из кода для .NET. Следует обратить внимание на расширение [Sphinx AutoAPI](https://github.com/readthedocs/sphinx-autoapi),
в котором такая возможность закладывается и реализовывается.
